# Project layout

## Target

A mono-repo and multi-api maven project

## Objectives

- [x] Better time to market
- [x] Better separation of concerns
- [x] Improved development experience
   - [x] Reduce the collision/merge conflicts between the works of different teams/members
       - [x] Simplified code review
       - [x] Straightforward merge, cherry pick
   - [x] Better reasoning of (feature) logic
   - [x] Reduced scope of Integration Tests
   - [x] A simpler revert to a certain API version
   - [x] Simple investigation (just disable an API and run the reproducible steps)
- [x] Release
    - [x] Some issues in one API could be reverted/or eliminated altogether in case of:
        - [x] last minute PT issues
        - [x] performance issues observed too late

## Current situation

- [x] (pm) `parent`
    - [x] (jm) `app`        -> all is in here (common, apione, apitwo and all tests/IT)
    - [x] (jm) `perf`       -> performance tests (gatling)
    - [x] (f) `companion`
        - [x] (f) `swagger`
        - [x] (f) `dockers`
        - [x] (f) `postman collections`
        - [x] (f) `(wire)mocks`
    - [x] (pm) `conf`
        - maven `assembly` plugin         -> create archives
        - ADO pipeline configuration

## Proposal

- [x] (pm) `multi_api_name`
    - [x] (jm) `app`
                        1) It is the bootstrapper of the application. It contains the `@SpringBootApplication` bootstrap.
                        2) It decides what modules to include in the final app.
                        3) The fatjar will be generated by this module.
    - [x] (jm) `common`
                        1) Common spring ctx slice (e.g.: Kafka, Cassandra conf)
                        2) No matter who produces changes and why they come in here it should be small/rare and w/o impacting negatively the api modules. See apithree for a better approach for some(most of the) cases.
                        3) No (Web) API exposed here.
    - [x] (jm) `apione`
    - [x] (jm) `apitwo`
    - [x] (pm) `apithree`
        - [x] (jm) `apithree-spec`
                        - expose an `internal api` (`spec`)
        - [x] (jm) `apithree-web`
                        - expose an `external (web) api`
    - [x] (jm) `perf`
                        - performance tests (gatling)
    - [x] (jm) `e2e`
                        - e2e tests (cucumber)
    - [x] (f) `companion`
        - [x] (f) `swagger`
        - [x] (f) `dockers`
        - [x] (f) `postman collections`
        - [x] (f) `(wire)mocks`
        - [x] (f) `cassandra`
                        - contains the CQL files
    - [x] (pm) `conf`
                        1) maven assembly plugin. Creates the deliverables (archives).
                        2) ADO pipeline configuration.

## Legend:
- (pm)      -> pom maven module
- (jm)      -> jar module
- (f)       -> folder
